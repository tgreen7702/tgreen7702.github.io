<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.269">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Travis Green">

<title>Assignment 03</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="assignment03_files/libs/clipboard/clipboard.min.js"></script>
<script src="assignment03_files/libs/quarto-html/quarto.js"></script>
<script src="assignment03_files/libs/quarto-html/popper.min.js"></script>
<script src="assignment03_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="assignment03_files/libs/quarto-html/anchor.min.js"></script>
<link href="assignment03_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="assignment03_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="assignment03_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="assignment03_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="assignment03_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Assignment 03</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Travis Green </p>
          </div>
  </div>
    
  
    
  </div>
  

</header>

<section id="access-teds2016-dataset-by-importing" class="level2">
<h2 class="anchored" data-anchor-id="access-teds2016-dataset-by-importing">Access TEDS2016 dataset by importing</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">"haven"</span>)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>TEDS_2016<span class="ot">&lt;-</span><span class="fu">read_dta</span>(<span class="st">"https://github.com/datageneration/home/blob/master/DataProgramming/data/TEDS_2016.dta?raw=true"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="select-only-relevant-variables-to-create-a-subset-of-the-dataset-tondu-female-dpp-age-income-edu-taiwanes-eand-econ_worse." class="level2">
<h2 class="anchored" data-anchor-id="select-only-relevant-variables-to-create-a-subset-of-the-dataset-tondu-female-dpp-age-income-edu-taiwanes-eand-econ_worse.">Select only relevant variables to create a subset of the dataset (Tondu, female, DPP, age, income, edu, Taiwanes eand Econ_worse).</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>TEDS_2016_subset <span class="ot">&lt;-</span> <span class="fu">subset</span>(TEDS_2016, <span class="at">select =</span> <span class="fu">c</span>(<span class="st">"Tondu"</span>,<span class="st">"female"</span>,<span class="st">"DPP"</span>,<span class="st">"age"</span>,<span class="st">"income"</span>,<span class="st">"edu"</span>,<span class="st">"Taiwanese"</span>,<span class="st">"Econ_worse"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="make-sure-the-dependent-variable-tondu-is-coded-with-right-labels" class="level2">
<h2 class="anchored" data-anchor-id="make-sure-the-dependent-variable-tondu-is-coded-with-right-labels">Make sure the dependent variable Tondu is coded with right labels</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>TEDS_2016_subset<span class="sc">$</span>Tondu<span class="ot">&lt;-</span><span class="fu">as.numeric</span>(TEDS_2016_subset<span class="sc">$</span>Tondu,<span class="at">labels=</span><span class="fu">c</span>(<span class="st">"Unification now"</span>, <span class="st">"Status quo, unif. in future"</span>, <span class="st">"Status quo, decide later"</span>, <span class="st">"Status quo forever"</span>, <span class="st">"Status quo, indep. in future"</span>, <span class="st">"Independence now"</span>, <span class="st">"No response"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="multiple-regression-analysis" class="level2">
<h2 class="anchored" data-anchor-id="multiple-regression-analysis">Multiple regression analysis</h2>
</section>
<section id="tondu-refers-to-an-attitude-toward-unification-with-mainland-china." class="level2">
<h2 class="anchored" data-anchor-id="tondu-refers-to-an-attitude-toward-unification-with-mainland-china.">Tondu refers to an attitude toward unification with mainland China.</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>model1<span class="ot">=</span><span class="fu">lm</span>(Tondu <span class="sc">~</span> age <span class="sc">+</span> income <span class="sc">+</span> edu,<span class="at">data=</span>TEDS_2016_subset)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(model1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = Tondu ~ age + income + edu, data = TEDS_2016_subset)

Residuals:
    Min      1Q  Median      3Q     Max 
-3.7780 -1.1841 -0.4322  1.1079  5.4157 

Coefficients:
             Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)  5.302529   0.257369  20.603  &lt; 2e-16 ***
age         -0.004205   0.003194  -1.316   0.1882    
income      -0.031855   0.016357  -1.948   0.0516 .  
edu         -0.244608   0.037579  -6.509 9.96e-11 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 1.725 on 1676 degrees of freedom
  (10 observations deleted due to missingness)
Multiple R-squared:  0.04287,   Adjusted R-squared:  0.04115 
F-statistic: 25.02 on 3 and 1676 DF,  p-value: 7.771e-16</code></pre>
</div>
</div>
</section>
<section id="regplot" class="level2">
<h2 class="anchored" data-anchor-id="regplot">Regplot</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>(<span class="at">regplot=</span> <span class="fu">plot</span>(<span class="fu">lm</span>(Tondu <span class="sc">~</span> age <span class="sc">+</span> income <span class="sc">+</span> edu, <span class="at">data =</span> TEDS_2016_subset)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="assignment03_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="assignment03_files/figure-html/unnamed-chunk-5-2.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="assignment03_files/figure-html/unnamed-chunk-5-3.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="assignment03_files/figure-html/unnamed-chunk-5-4.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>NULL</code></pre>
</div>
</div>
</section>
<section id="what-is-the-problem-why-hint-how-many-categories-in-the-dv" class="level2">
<h2 class="anchored" data-anchor-id="what-is-the-problem-why-hint-how-many-categories-in-the-dv">What is the problem? Why? (hint: how many categories in the DV?)</h2>
<section id="the-problem-is-that-the-dv-is-not-numerical-but-instead-consisting-of-different-categories.-linear-regression-analysis-is-not-a-suitable-model-in-this-case." class="level4">
<h4 class="anchored" data-anchor-id="the-problem-is-that-the-dv-is-not-numerical-but-instead-consisting-of-different-categories.-linear-regression-analysis-is-not-a-suitable-model-in-this-case.">The problem is that the DV is not numerical but instead consisting of different categories. Linear regression analysis is not a suitable model in this case.</h4>
</section>
</section>
<section id="what-can-be-done-to-improve-prediction-of-the-dependent-variable" class="level2">
<h2 class="anchored" data-anchor-id="what-can-be-done-to-improve-prediction-of-the-dependent-variable">What can be done to improve prediction of the dependent variable?</h2>
<section id="we-can-try-nominal-logistic-regression-or-multinomial-logistic-regression.-this-may-be-suitable-because-our-dv-consists-of-categories-that-are-not-ordered-in-any-specific-way." class="level4">
<h4 class="anchored" data-anchor-id="we-can-try-nominal-logistic-regression-or-multinomial-logistic-regression.-this-may-be-suitable-because-our-dv-consists-of-categories-that-are-not-ordered-in-any-specific-way.">We can try nominal logistic regression or multinomial logistic regression. This may be suitable because our DV consists of categories that are not ordered in any specific way.</h4>
</section>
</section>
<section id="steps-to-run-a-multinomial-regression-analysis-httpsstats.oarc.ucla.edurdaemultinomial-logistic-regression" class="level2">
<h2 class="anchored" data-anchor-id="steps-to-run-a-multinomial-regression-analysis-httpsstats.oarc.ucla.edurdaemultinomial-logistic-regression">Steps to run a multinomial regression analysis: https://stats.oarc.ucla.edu/r/dae/multinomial-logistic-regression/</h2>
</section>
<section id="first-we-need-to-choose-the-level-of-our-outcome-that-we-wish-to-use-as-our-baseline-and-specify-this-in-the-relevel-function." class="level2">
<h2 class="anchored" data-anchor-id="first-we-need-to-choose-the-level-of-our-outcome-that-we-wish-to-use-as-our-baseline-and-specify-this-in-the-relevel-function.">First, we need to choose the level of our outcome that we wish to use as our baseline and specify this in the relevel function.</h2>
</section>
<section id="to-do-so-reorganize-the-dv-as-unordered-factors-and-before-that-define-a-new-subset-to-use-with-this-newly-defined-dv." class="level2">
<h2 class="anchored" data-anchor-id="to-do-so-reorganize-the-dv-as-unordered-factors-and-before-that-define-a-new-subset-to-use-with-this-newly-defined-dv.">To do so, reorganize the DV as unordered factors (and before that, define a new subset to use with this newly defined DV).</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>TEDS_2016_subset1 <span class="ot">&lt;-</span> <span class="fu">subset</span>(TEDS_2016, <span class="at">select =</span> <span class="fu">c</span>(<span class="st">"Tondu"</span>,<span class="st">"female"</span>,<span class="st">"DPP"</span>,<span class="st">"age"</span>,<span class="st">"income"</span>,<span class="st">"edu"</span>,<span class="st">"Taiwanese"</span>,<span class="st">"Econ_worse"</span>))</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>TEDS_2016_subset1<span class="sc">$</span>Tondu<span class="ot">&lt;-</span><span class="fu">factor</span>(TEDS_2016_subset<span class="sc">$</span>Tondu,<span class="at">labels=</span><span class="fu">c</span>(<span class="st">"Unification now"</span>, <span class="st">"Status quo, unif. in future"</span>, <span class="st">"Status quo, decide later"</span>, <span class="st">"Status quo forever"</span>, <span class="st">"Status quo, indep. in future"</span>, <span class="st">"Independence now"</span>, <span class="st">"No response"</span>))</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>TEDS_2016_subset1<span class="sc">$</span>Tondu1 <span class="ot">&lt;-</span> <span class="fu">relevel</span>(<span class="fu">factor</span>(TEDS_2016_subset1<span class="sc">$</span>Tondu), <span class="at">ref =</span> <span class="st">"Status quo forever"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="then-we-run-our-model-using-multinom" class="level2">
<h2 class="anchored" data-anchor-id="then-we-run-our-model-using-multinom">Then we run our model using multinom</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(nnet)</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>model2 <span class="ot">&lt;-</span> <span class="fu">multinom</span>(Tondu1 <span class="sc">~</span> age <span class="sc">+</span> income <span class="sc">+</span>edu, <span class="at">data =</span> TEDS_2016_subset1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># weights:  35 (24 variable)
initial  value 3269.129050 
iter  10 value 2869.593748
iter  20 value 2755.840913
iter  30 value 2651.919302
final  value 2651.908647 
converged</code></pre>
</div>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(model2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Call:
multinom(formula = Tondu1 ~ age + income + edu, data = TEDS_2016_subset1)

Coefficients:
                             (Intercept)         age       income        edu
Unification now               -2.1549387  0.01010911 -0.063150287 -0.2394468
Status quo, unif. in future   -2.8537017  0.02516931  0.024722292  0.2426497
Status quo, decide later       0.9803362 -0.01942986  0.010187277  0.1323068
Status quo, indep. in future   0.9225328 -0.03101966  0.003336138  0.1987447
Independence now               1.9743202 -0.03678385 -0.077439043 -0.2882092
No response                   -0.5399675  0.01876827 -0.065517089 -0.5604003

Std. Errors:
                             (Intercept)         age     income        edu
Unification now                1.3202862 0.016403438 0.07947722 0.19072665
Status quo, unif. in future    0.5834670 0.007075456 0.03605767 0.07944057
Status quo, decide later       0.4367569 0.005491754 0.02754069 0.06292071
Status quo, indep. in future   0.4777090 0.006058734 0.03017855 0.07014215
Independence now               0.6862989 0.008950275 0.04397361 0.10342960
No response                    0.7560652 0.009340697 0.04318008 0.11696422

Residual Deviance: 5303.817 
AIC: 5351.817 </code></pre>
</div>
</div>
</section>
<section id="the-multinom-package-does-not-include-p-value-calculation-for-the-regression-coefficients-so-we-calculate-p-values-using-a-z-test." class="level2">
<h2 class="anchored" data-anchor-id="the-multinom-package-does-not-include-p-value-calculation-for-the-regression-coefficients-so-we-calculate-p-values-using-a-z-test.">The multinom package does not include p-value calculation for the regression coefficients, so we calculate p-values using a z-test.</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>z <span class="ot">&lt;-</span> <span class="fu">summary</span>(model2)<span class="sc">$</span>coefficients<span class="sc">/</span><span class="fu">summary</span>(model2)<span class="sc">$</span>standard.errors</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a> p <span class="ot">&lt;-</span> (<span class="dv">1</span> <span class="sc">-</span> <span class="fu">pnorm</span>(<span class="fu">abs</span>(z), <span class="dv">0</span>, <span class="dv">1</span>)) <span class="sc">*</span> <span class="dv">2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "î§‹";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>
